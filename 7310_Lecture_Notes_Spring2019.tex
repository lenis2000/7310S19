\documentclass{article}
\usepackage[utf8]{inputenc}

\usepackage{sectsty}
\usepackage{array}
\newcommand{\R}{\mathbb{R}}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{titlesec}
% \titleformat{\section}{\bfseries \filcenter}{}{1em}{}
% \titleformat{\subsection}[block]{\filcenter}{}{1em}{}
\setlength{\parindent}{1.7em}
\renewcommand{\baselinestretch}{1}

\usepackage[mathscr]{euscript}

\usepackage{hyperref}
\usepackage{cleveref}

\usepackage{amsthm} 
\usepackage{tikz-cd}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{example}[theorem]{Example}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}


\newcommand\myeq{\mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny (a)}}}{=}}}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{float}
\usepackage{young}
\usepackage[vcentermath]{youngtab}

\title{7310 Lecture notes. Spring 2019}
\author{Instructor: Leonid Petrov}
\date{}

\begin{document}

\maketitle

\section*{Typing credits}

\begin{enumerate}
	\item January 15 and 17, 2019 --- Yichen Ma
	\item January 22 and 24, 2019 --- Bennett Rennier
	\item January 29 and 31, 2019 --- ???
	\item February 5 and 7, 2019 --- ???
	\item February 12 and 14, 2019 --- Shunyu Wan
\end{enumerate}

\tableofcontents

\part{Construction of measure}

\section{January 15, 2019}

\subsection{Basics}

A few completions of of $\mathbb{Q}$:

1) Cauchy sequences

2) Dedekind cuts

3) Axiomated total ordered complete fields

4) Decimal expanation up to equivalence class


\begin{definition}
Dedekind cut is a pair of non-empty sets $(A,B)$ such that it satisfies $\mathbb{Q} = A \sqcup B$ and the following:

1. if $x \in A$, $y < x$ $\Longrightarrow$ $y \in A$, i.e., A is order-closed downwards.

2. if $x \in B$, $y \geq x$, $\Longrightarrow$ $y \in B$, i.e., B is order-closed upwards.

3. A does not have a maximum element
\end{definition}
Define $\mathbb{R} = \{$Dedekind cuts of $\mathbb{Q}\}$. For simplicity, we can use $A$ to represent the pair $(A,B)$. Note we can define an order on $\mathbb{R}$ by set inclusion with respect to $A$. We can also define addition. subtraction, multiplication, division on $\mathbb{R}$ such that $\mathbb{R}$ is totally ordered, complete field.

\begin{theorem}
$\mathbb{R}$ is uncountable.
\end{theorem}
\begin{proof}
	Diagonal process. The complete proof is left as an exercise for the reader.
\end{proof}

\subsection{Problem of measure}

Question 1: What is the {\bf length} $\ell$ of a subset of $\mathbb{R}$?

a) $\ell([0,1]) = 1$;

b) $\ell(\{x\}) = 0$ for any $x \in \mathbb{R}$;

c) $\ell(\{x \in \mathbb{R}: x = 0.{*}{*}3{*}{*}{*}{*}{*}...\})$ = $\frac{1}{10}$.
This is the set of decimal expansions such that there is a ``3'' in the third place after the dot.

\vspace{3mm}

{\bf Axioms of length on $\mathbb{R}$}:

1. $\ell([0,1]) = 1$. i.e., normalized;

2. for $A \subseteq \mathbb{R}$ such that $A = A_1 \sqcup A_2 \sqcup ...$, $
(A) = \sum_{i=1}^{\infty} 
(A_i)$, i.e., countable additivity;

3. for $A \subseteq \mathbb{R}$, $\alpha \in \mathbb{R}$, $\ell(A+\alpha) = \ell(A)$, i.e., transitivity-invariant.

\begin{theorem}
Consider the length $\ell : 2^\mathbb{R} = P(\mathbb{R}) \longrightarrow [0,\infty]$, such length does not exist.
\end{theorem}
\begin{proof}
We can write $[0,1) = \bigsqcup_{r \in N}(\mathbb{Q}+r) \cap [0,1)$, where $N$ is the collection of representatives of each equivalence class with respect to the following equivalence relation: $x \sim y \Longleftrightarrow x-y \in \mathbb{Q}$. Note that we need Axiom of Choice to define $N$. Then as length is transitivity-invariant, $\ell(N) = \ell(N+\alpha) \forall\ \alpha$. Hence 1 = $\ell([0,1))$ = $\sum_{x \in N} \ell(N+x)$, but the right hand side is the sum of countably infinite elements with the same value, either equals 0 or infinity. Contradiction.
\end{proof}
\begin{corollary}
There exist non-measurable sets.
\end{corollary}

\subsection{Outer measure}

\begin{definition}
Let $X$ be a set. $\mu\colon 2^X \longrightarrow [0, \infty]$ is called an {\bf outer measure} if

1. $\mu(\varnothing) = 0$;

2. if $A \subseteq \bigcup_{k=1}^\infty A_k$, then $\mu(A) \leq \bigcup_{k=1}^\infty \mu(A_k)$ (Hence $\mu(A) \leq \mu(B)$ if $A \subseteq B$).
\end{definition}


\begin{definition}
Let $X$ be a set, $\mu$ an outer measure defined on $X$. Then $A \subseteq X$ is called $\mu$-measurable if for all $B \subseteq X$, $\mu(B) = \mu(B \cap A)+\mu(B \cap A^c)$
\end{definition}

\subsection{\texorpdfstring{$\sigma$}{Sigma}-algebras}

\begin{definition}
Let $X$ be a set. $\mathscr{F} \subseteq X$ is called $\sigma$-algebra if 

1. $\varnothing \in \mathscr{F}$

2. $A \in \mathscr{F}$ $\Longrightarrow$ $A^c \in \mathscr{F}$

3. if $A_1, A_2,... \in \mathscr{F}$, then $\bigcup_{k=1}^\infty A_k \in \mathscr{F}$
\end{definition}

We will eventually prove the following important theorem:
\begin{theorem}[Caratheodory Extension Theorem]
Let $X$ be a set, $\mu$ an outer measure on $X$. Then the class of $\mu$-measurable sets is a $\sigma$-algebra.
\end{theorem}


Below are some examples of $\sigma$-algebras:
\begin{itemize}
	\item $X$ countable, $\mathscr{F} = 2^X$ is a $\sigma$-algebra;

    \item for any set $X$, $\mathscr{F} = \{\varnothing, X\}$ is called the trivial $\sigma$-algebra;
    
    \item for any set $X$, $A \subseteq X$, $\mathscr{F} = \{ \varnothing, A, A^c, X\}$ is a $\sigma$-algebra (generated by the set $A$).
    That is, we define $\sigma(A)$ = $\{\varnothing, A, A^c, X\}$ = $\bigcap_{\{\mathscr{F} \in S\}} \mathscr{F}$, where $S = \{$$\mathscr{F}$ is a $\sigma$-algebra containing A$\}$. 
\end{itemize}

\begin{proposition}
Let $X$ be a set. For any set $\Gamma$ (not necessarily countable), if $\mathscr{F}_x$ is a $\sigma$-algebra on $X$ for all $x \in \Gamma$, then $\bigcap_{x \in \Gamma} \mathscr{F}_x$ is also a $\sigma$-algebra.
\end{proposition}
\begin{proof}
	Exercise left for the reader.
\end{proof}

\begin{definition}
The Borel $\sigma$-algebra of $\mathbb{R}^d$ (d $\geq$ 1), denoted as $B(\mathbb{R}^d)$, 
is defined as the $\sigma$-algebra generated by all open sets in $\mathbb{R}^d$. 
\end{definition}
The Borel $\sigma$-algebra has countable generating sets (e.g. rational rectangles).


\section{January 17, 2019}

\subsection{Measures}

\begin{definition}
Let $X$ be a set, $\mathscr{F}$ a $\sigma$-algebra on $X$. Then a {\bf measure} on $\mathscr{F}$ is a function $\mu: \mathscr{F} \longrightarrow [0,\infty]$ such that

a) $\mu(\varnothing) = 0$;

b) for $A_1, A_2,... \in \mathscr{F}$ such that $A_i \cap A_j = \varnothing$ for $i \neq j$, $\mu(\bigcup_{i = 1}^\infty A_i) = \sum_{i=1}^\infty \mu(A_i)$, i.e., $\mu$ is countably additive. 

We call $(X,\mathscr{F},\mu)$ a {\bf measure space}.
\end{definition}

Below are some examples of measure spaces. Let $X$ be a set.
\begin{itemize}
    \item Fix $x \in X$, then for $A \subseteq X$ consider $\delta$: $X \longrightarrow [0,\infty]$ by $$\delta(A) = \left\{  
        \begin{array}{cc}
        0 & if \hspace{1mm} x \notin A \\
        1 & if \hspace{1mm} x \in A
    \end{array}\right.
    $$ 
    This is called the $\delta$-measure at $x \in X$.
    \item Let $\mathscr{F} = 2^X$, for $A \in X$, define $\mu$ such that $\mu(A) = 0$ if $A$ is countable, and $\mu(A) = 1$ if $A$ is co-countable (i.e., $A^c$ is countable). Then $(X,\mathscr{F},\mu)$ is a measure space.
    \item For $X$ countable, i.e., $X = \{x_1, x_2,...\}$. Let $\mathscr{F} = 2^X$. Denote 
    $p(x_i) =$ weight of $x_i$, then for $A \subseteq X$, define $\mu(A) = \sum_{x \in A}p(x)$. $(X,\mathscr{F}, \mu)$ is a measure space.
\end{itemize}

\vspace{3mm}

{\bf Properties of a measure space $(X, F, \mu)$}

\begin{enumerate}
    \item for $A, B \subseteq X$, $A \subseteq B$ $\Longrightarrow$ $\mu(A) \leq \mu(B)$;
    \item (countably subadditive) if $A \subseteq \bigcup_{i=1}^\infty A_i$ $\Longrightarrow$ $\mu(A) \leq \sum_{i=1}^\infty \mu(A_i)$;
    \item (continuity) for a sequence of subsets in $X$, $A_1 \subseteq A_2 \subseteq ...$, 
    $$\mu(\bigcup_{i=1}^\infty A_i) = \lim_{i \rightarrow \infty} \mu(A_i);$$
    for a sequence of subsets in $X$, $A_1 \supseteq A_2 \supseteq ...$ such that $\mu(A_i) < \infty$ $\forall i$, 
    $$\mu(\bigcap_{i=1}^\infty A_i) = \lim_{i \rightarrow \infty} \mu(A_i).$$
\end{enumerate}

\vspace{3mm}

A counterexample for 3) if we drop the condition ``$\mu(A_i)< \infty$ $\forall i$" is $X = \mathbb{R}$, $F = \sigma(\mathbb{R})$, $A_i = (i, \infty)$ for $i \in \mathbb{N}$, then each $\mu(A_i) = \infty$ but $lim_{i \rightarrow \infty} \mu(A_i) = 0$.

\begin{definition}
Let $(X,F,\mu)$ be a measure space. $\mu$ is called {\bf finite} if $\mu(X) < \infty$, $\mu$ is called \textbf{$\sigma$-finite} if $X = \bigcup E_n$ where $\mu(E_n) < \infty$ $\forall n$.
\end{definition}

\vspace{3mm}

\noindent 
{\bf Semicontinuity.} Let $\{A_n: n \in \mathbb{N}\}$ be a collection of sets. Then define
\begin{align*}
	&
	\text{$\liminf A_n$ = $\{$elements in almost all $A_n \}$ = $\bigcup_{n=1}^\infty(\bigcap_{k=n}^\infty A_k)$},
	\\&
	\text{$\limsup A_n$ = $\{$elements in $A_n$ infinitely often$\}$ = $\bigcap_{n=1}^\infty(\bigcup_{k=n}^\infty A_k)$}.
\end{align*}

\begin{proposition} We have
	\begin{equation*}
		\mu(\limsup A_n) \geq \limsup \mu(A_n),\qquad 
		\mu(\liminf A_n) \le \liminf \mu(A_n).
	\end{equation*}
\end{proposition}
\begin{proof}
	Homework exercise.
\end{proof}

\subsection{Completeness}

\begin{definition}
Consider $(X,\mathscr{F}, \mu)$, $B \in \mathscr{F}$ is called a {\bf null set} if $\mu(B) = 0$. Note if $B$ is a null set, $A \subseteq B$, then $\mu(A) = 0$
in the sense of outer measure
(not necessarily $A \in \mathscr{F}$).
\end{definition}

\begin{definition} $(X,\mathscr{F})$ is {\bf complete} if all null sets are contained in $\mathscr{F}$.
\end{definition}

Here we introduce a notation ``{\bf a.e}", the abbreviation of ``almost everywhere". Something happens a.e. if it happens outside a null set. Here are a few examples:

\noindent
Consider the Dirichlet function $f(x) = \left\{ \begin{array}{cc}
    1 &  if \hspace{1mm} x \in \mathbb{Q} \\
    0 &  if \hspace{1mm} x \in \mathbb{R} \backslash \mathbb{Q}
\end{array}\right.$. Then $f(x) = 0$ a.e.

\noindent
Consider the (small) Riemann function $f(x) = \left\{ \begin{array}{cc}
    \frac{1}{q} & if \hspace{1mm} x = \frac{p}{q} \in \mathbb{Q}   \\
    0  & if \hspace{1mm} x \in \mathbb{R} \backslash \mathbb{Q}
\end{array}\right.$. Then $f$ is continuous a.e.

\begin{theorem}
There is an unique completion of any measure space $(X,\mathscr{F},\mu)$. i.e., there exist $\overline{\mathscr{F}}, \overline{\mu}$ with $\overline{\mathscr{F}} \supseteq \mathscr{F}$ and $\overline{\mu}|_\mathscr{F} = \mu$. Specifically, 
$$\overline{\mathscr{F}} = \{A \cup B| \hspace{1mm} A \in \mathscr{F}, B \subseteq N \textnormal{ for some } N \in \mathscr{F}, \mu(N)=0 \},$$
which satisfies:

1) $\overline{\mathscr{F}}$ is a $\sigma$-algebra;

2) there exists unique extension $\overline{\mu}$ of $\mu$, from $\mathscr{F}$ to $\overline{\mathscr{F}}$ such that $\overline{\mu}|_\mathscr{F} = \mu$. 
\end{theorem}
\begin{proof}
Let $\mathscr{N} = \{N \in \mathscr{F}: \mu(N) = 0\}$. Then it is closed under countable unions and complement, hence so is a$\overline{\mathscr{F}}$. Then set $\overline{\mu}(A \cup B) = \mu(A)$
if $B\subseteq N\in \mathscr{N}$. Then it is left as an exercise to the reader to check:

a) $\overline{\mu}$ is well-defined (i.e., if there
is another way of writing $A\cup B=A'\cup B'$, $B'\subseteq N'\in \mathscr{N}$, then the measure
does not change);

b) $\overline{\mu}$ is a measure;

c) $\overline{\mu}$ is a unique extension to $\overline{\mathscr{F}}$ defined in 
the claim.
\end{proof}

Note that the Borel $\sigma$-algebra is not complete with respect to the length measure $\ell$.

\subsection{Caratheodory's theorem. Formulation and first part of proof}

Let $X$ be a set. Recall the definition of the outer measure $\mu$ on $2^X$.

\begin{definition}
$A \subseteq X$ is a $\mu$-measurable set with respect to $\mu$ if $\mu(A) = \mu(A\cap B) + \mu(A \cap B^c)$ $\forall B \in 2^X$.
\end{definition}

We now begin the proof of the 
Caratheodory's extension theorem:

\begin{theorem}[Caratheodory]
	\label{thm:Caratheodory}
Let $\mu$ be an outer measure on a set $X$, then the following statements are true:

1) $\mathscr{F} = \{A\colon \textnormal{$A$ is a $\mu$-measurable set}\}$ is a $\sigma$-algebra;

2) $\mu|_\mathscr{F}$ is a complete measure.

\end{theorem}
\begin{proof}
    For 1), first of all, $\mathscr{F}$ is closed under complement by the definition of the outer measure and the measurable sets. Then for $A, B \in \mathscr{F}$, take any $S \subseteq X$, then
    \begin{multline*}\mu(S) = \mu(S \cap A) + \mu(S \cap A^c) \\= \mu(S \cap A \cap B) + \mu(S \cap A \cap B^c) + \mu(S \cap A^c \cap B) + \mu(S \cap A^c \cap B^c).
    \end{multline*}
    Note $A \cup B = (A \cap B) \cup (A \cap B^c) \cup (A^c \cap B)$, then by subadditivity, 
    $$\mu (S \cap (A \cap B)) + \mu(S \cap (A \cap B^c)) + \mu(S \cap (A^c \cap B)) \geq \mu(S \cap (A\cup B)).$$ 
    Hence $\mu(S) \geq \mu(E \cap (A \cup B)) + \mu(E \cap (A\cup B)^c)$. Hence $A \cup B \in \mathscr{F}$, so $\mathscr{F}$ is an algebra. 

		Also, if $A, B \in \mathscr{F}$ with $A \cap B = \varnothing$, $$\mu(A \cup B) = \mu((A\cup B)\cap A) + \mu((A \cup B) \cap A^c) = \mu(A) + \mu(B).$$ This shows finite additivity of $\mu$ on $\mathscr{F}$. 
    
    (other parts will be proven next time.) 
\end{proof}

\subsection{Definition of a pre-measure}

We will also work with outer measures 
constructed using pre-measures:

\begin{definition}
	Let $X$ be a set, $\Gamma \subseteq 2^X$, $\nu: \Gamma \longrightarrow [0, \infty]$ be any function. Then the {\bf pre-measure} $\mu$ on $2^X$ is defined as for $F \in 2^X$, $$ \mu(F) = \inf \biggl\{\sum_{n=1}^\infty \nu(A_n): A_n \in \Gamma, F \subseteq \bigcup_{n=1}^\infty A_n\biggr\}.$$
	By agreement, $\inf \varnothing = 0$.
\end{definition}

\begin{proposition}
With the same set up as above, $\mu$ is an outer measure. 
\end{proposition}
\begin{proof}
	This will also be proven next time.
\end{proof}

\section{January 22, 2019}

\subsection{From outer measure to measure}

We are on a path of constructing the measure. 
Last time, we defined pre-measures, and this definition will be used later.
Here we show how an outer measure leads to a measure,
i.e., finish the proof of the Caratheodory theorem.

Recall that if $\mu$ is an outer measure, 
we say that a set \( A \) is
\(\mu\)-measurable if for all \( E \subseteq X \),
\begin{displaymath}
	\mu(E) = \mu(E \cap A) + \mu(E \cap A^c).
\end{displaymath}
Note that in the proofs we need only to check \( \geq \) since \( \leq \) follows directly
from subadditivity.
Denote by $\mathscr{F}$ the set of all $\mu$-measurable subsets.

\begin{proof}[Rest of the proof of Caratheodory theorem (\Cref{thm:Caratheodory})]
	We have shown in Lecture 2 that $\mathscr{F}$ is an algebra (closed under finite unions,
	intersections, and complements) and that $\mu$ is finitely additive on $\mathscr{F}$.

	Now we need to show that $\mathscr{F}$ is a $\sigma$-algebra. Let $A_1,A_2,\ldots\in \mathscr{F} $
	be disjoint, and define $B_n=\bigsqcup_{j=1}^{n}A_j$.
	We know that $B_n\in \mathscr{F}$,
	so we need to show that $B=\bigcup_{n=1}^{\infty}B_n\in \mathscr{F}$.

	First, for all $E\subseteq X$, we have
	\begin{equation*}
		\mu(E\cap B_n)=\mu(E\cap B_n\cap A_n)+\mu(E\cap B_n\cap A_n^c)
		=
		\mu(E\cap A_n)+\mu(E_\cap B_{n-1}).
	\end{equation*}
	Continuing this, we see that 
	\begin{equation*}
		\mu(E\cap B_n)=\sum_{i=1}^{n}\mu(E\cap A_i).
	\end{equation*}
	Thus, 
	\begin{equation*}
		\mu(E)=\mu(E\cap B_n)+\mu(E\cap B_n^c)\ge \sum_{i=1}^{n}\mu(E\cap A_i)+\mu(E\cap B^c).
	\end{equation*}
	The last inequality is due to the fact that in the second summand 
	we have passed to the smaller set $E\cap B$.
	In the previous inequality we can now pass to $n\to\infty$, and all the sums in the 
	right-hand side are bounded:
	\begin{equation*}
		\mu(E)\ge \sum_{i=1}^{\infty}\mu(E\cap A_i)+\mu(E\cap B^c).
	\end{equation*}
	By subadditivity, this is 
	\begin{equation*}
		\ge \mu\left( \bigcup_{i=1}^{\infty}(E\cap A_i) \right)+\mu(E\cap B^c)
		=\mu(E\cap B)+\mu(E\cap B^c).
	\end{equation*}
	This shows that $B\in \mathscr{F}$, so $\mathscr{F}$ is a $\sigma$-algebra.

	The $\sigma$-additivity of $\mu$ on $\mathscr{F}$ is straightforward, take $B=E$ in the previous
	argument, which leads to $\mu(B)=\sum_{i=1}^{\infty}\mu(A_i)$.

	Finally, to show completeness, let $A\subseteq X$ be with the outer measure $\mu(A)=0$.
	We want to show that $A\in \mathscr{F}$.
	We have for all $E\subseteq X$:
	\begin{equation*}
		\mu(E)\le \mu(E\cap A)+\mu(E\cap A^c)=\mu(E\cap A^c)\le \mu(E)
	\end{equation*}
	because the outer measure is subadditive and so $\mu(E\cap A)=0$.
	The last inequality is also due to subadditivity.
	This implies that $\mu(E)=\mu(E\cap A)+\mu(E\cap A^c)$, 
	so $E\in \mathscr{F}$.
\end{proof}

\subsection{From pre-measure to outer measure}

Recall the definition of a pre-measure:

\begin{definition}[Pre-measure]
    Let \( X \) be a set and let \( \mathcal{E} \) be a set of subsets of \(
    X \). Then any function \( \nu : \mathcal{E} \to [0, \infty] \) is
    called a \emph{pre-measure}.
\end{definition}

\begin{proposition}
    If \( \nu \) is a pre-measure, then $\mu$ defined by 
    \begin{displaymath}
        \mu(E) = \inf \left\{ \sum_{i = 1}^{\infty} \nu(A_{i}) : A_{i}
        \in \mathcal{E}, E \subseteq \cup_{i = 1}^{\infty} A_{i}  \right\}
    \end{displaymath}
    is an outer measure on \( \mathcal{E} \).
\end{proposition}
\begin{proof}
    We need only prove the subadditivity of $\mu$. Let \( F \subseteq
    \cup_{i = 1}^{\infty} F_{i} \) and let \( \varepsilon > 0 \). By
    construction of \(\mu\), there are sets \( A_{i}^{n} \) such that \(
    F_{i} \subseteq \cup_{n = 1}^{\infty} A_{i}^{n} \) and
    \begin{displaymath}
        \mu(F_{i}) + \frac{\varepsilon}{2^{i}} \geq \sum_{n = 1}^{\infty}
        \nu(A_{i}^{n}).
    \end{displaymath}
    We also note that
    \begin{displaymath}
        F \subseteq \bigcup_{i = 1}^{\infty} F_{i} \subseteq\bigcup_{i =
        1}^{\infty} \bigcup_{n = 1}^{\infty} A_{i}^{n}.
    \end{displaymath}
    This means
    \begin{displaymath}
        \mu(F)
        \leq \mu\left(\bigcup_{i = 1}^{\infty} \bigcup_{n = 1}^{\infty}
        A_{i}^{n}\right)
        \leq \sum_{i = 1}^{\infty} \sum_{n = 1}^{\infty} \mu(A_{i}^{n})
        \leq \sum_{i = 1}^{\infty} \left( \mu(F_{i}) + \frac{\varepsilon}{2^{i}}
        \right).
    \end{displaymath}
    As we can make \(\varepsilon\) as small as we'd like, this implies that \(
    \mu(F) \leq \sum_{i = 1}^{\infty} \mu(F_{i}) \) as we wanted.
\end{proof}

\subsection{Examples}

Now, pre-measures are an easy way of constructing an outer measure, but as
    we will see, the resulting outer measure may not agree with our original pre-measure.
    For example, 
    let \( \mathcal{E} = \{ \varnothing, A, A^c , X \} \) where \(
    \nu(\varnothing)
    = 0 \), \( \nu(A) = a \), \( \nu(A^c) = b \), and \( \nu(X) = 1 \). Then for
    the
    corresponding outer measure \(\mu\) we have that \( \mu(\varnothing) = 0 \)
    and \(
    \mu(X) = \min(a + b, 1) \). Furthermore, if \( B \subseteq A \), then \( \mu(B) = a \)
    and if \( B \subseteq A^c \), then \( \mu(B) = b \). However, is \( A \)
    even \(\mu\)-measurable? We see that \( A \) is \(\mu\)-measurable only if
    \begin{displaymath}
        \min(a + b,1) = \mu(X) = \mu(E \cap A) + \mu(E \cap A^c) = \mu(A)
        + \mu(A^c) = a + b.
    \end{displaymath}
    In other words, if \( a + b > 1 \), then \( A \) will not be one of our
    \(\mu\)-measurable sets. This should serve as a warning that the sets in \( \mathcal{E} \) may not be
    \(\mu\)-measurable.

    For a second example, let \( \mathcal{E} \) be the set of finite unions of
    sets of the form \( (a,b] \cap \mathbb{Q} \). We let \( \nu(\varnothing) =
    0 \) and \( \nu(A) = \infty \) for \( \varnothing \neq A \in \mathcal{E} \).
    We note that in this case, there is more than one possible \(\mu\) which
    extends
    \( \nu \). For example, we can assign all
    points measure zero, or measure 1, or measure 2, or measure $\infty$.

\subsection{Lebesgue-Stieltjes measures}

The \emph{Borel \(\sigma\)-algebra} is the \(\sigma\)-algebra \( \mathcal{B}(\mathbb{R}) \)
generated by all open subsets of \(\mathbb{R}\). A measure $\mu$
on \( \mathcal{B}(\mathbb{R}) \) is called a \emph{Borel measure}.
(Sometimes we will assume that it's $\sigma$-finite; moreover,
that bounded sets have finite measure.)

\begin{remark}
    The cardinality of the Borel $\sigma$-algebra is 
    continuum. This can be proven using transfinite induction.
\end{remark}

Assuming that \(\mu\) is a finite Borel measure, we can
define the function
\( F(x) = \mu((- \infty, x]) \). We see that \( F \) is
weakly increasing and is right-continuous.\footnote{It is right-continuous 
	because $\mu\left( (-\infty,a] \right)=\mu\left( \bigcap_{n=1}^{\infty}(-\infty,a_n] \right)=
\lim\limits_{n\to+\infty}\mu\left( (-\infty,a_n] \right)$
by the continuity of measure, where $a_n$ decrease to $a$.}
On the other hand, 
having a right-continuous and weakly increasing function,
we can define a pre-measure $\nu$ for which
$\nu((a,b])=F(b)-F(a)$.
Measures constructed from such pre-measures are called
\emph{Lebesgue-Stieltjes measures}. 
In particular, if we take \( F(x) = x \) as our
pre-measure function, then the resulting measure is called the Lebesgue
measure (note that it is not finite).
In the next lecture we discuss how this works exactly.

\section{January 24, 2019}

\subsection{Lebesgue-Stieltjes measures continued}

The goal now is to finish the construction of measure
from pre-measures, and apply this to Lebesgue-Stieltjes measures.
There are two main pieces of the construction that are still missing:
\begin{enumerate}
	\item If the pre-measure is countably additive on $\mathcal{E}$, then the
		resulting measure (coming from the corresponding outer measure by the Caratheodory theorem)
		agrees with the pre-measure on $\mathcal{E}$, and the sets from $\mathcal{E}$ are
		measurable.
	\item The pre-measure constructed from a function $F$ is countably additive.
\end{enumerate}
The first part is an abstract statement; and the second part is a 
concrete result that applies on $\mathbb{R}$ and in the Lebesgue-Stieltjes context.
We start with the second one.

Let \( \mathcal{A} \) be the set of finite disjoint unions of intervals of the form \(
(a,b] \), where $-\infty\le a\le b\le \infty$. 
This is an algebra (i.e. is closed under finite intersections,
finite unions, and complements). 
Let $F$ be a weakly increasing right-continuous function.
We construct a pre-measure \(\nu\) on \(
\mathcal{A} \) where for disjoint unions, 
\begin{displaymath}
    \nu\left(\bigsqcup_{i = 1}^{n} (a_{i}, b_{i}]\right) 
		=
		\sum_{i = 1}^{n} (F(b_{i}) - F(a_{i}))
\end{displaymath}
and we'll use this pre-measure to construct our measure \(\mu\).
There are some potential issues in this definition (that $\nu$ is well-defined)
that are resolved in the next proposition:

\begin{proposition}
\begin{itemize}
    \item \(\nu\) is well-defined;
    \item \(\nu\) is finitely additive;
    \item \(\nu\) is countably additive.
\end{itemize}
\end{proposition}
\begin{proof}
    Let \( A = \cup I_{i} = \cup J_{j} \) where \( I_{i}, J_{j} \) are
    intervals. Then we see that
    \begin{displaymath}
        \nu(A) = \sum_{i} \sum_{j} \nu(I_{i} \cap J_{j})
    \end{displaymath}
    the latter of which is equal to both \( \sum_{i} \nu(I_{i}) \) and \(
    \sum_{j} \nu(J_{j}) \), proving that \(\nu\) is well-defined.
		The fact that $\nu$ is finitely additive on $\mathcal{A}$ is 
		evident from the definition.

		\medskip

		We will now prove that $\nu$ is countably additive on 
		$\mathcal{A}$.
    Let \( I_{i} \in \mathcal{A} \) and \( I = \cup_{i = 1}^{\infty} I
    _{i} \). We can assume without loss of generality that \( I \) is an
    interval (we can apply the rest of our reasoning to the individual components of \(
    I \)). We will further assume that \( I \) has finite measure (the
    infinite measure case is left as an exercise).
    Now what we want to show is that \( \nu(\cup_{i = 1}^{\infty}
    I_{i}) = \sum_{i = 1}^{\infty} \nu(I_{i}) \).
    We have
    \begin{displaymath}
        \nu(I) = \nu(\cup_{i = 1}^{n} I_{i}) + \nu(I \setminus
        \cup_{i = 1}^{n} I_{i}) \geq \sum_{i = 1}^{n} \nu(I_{i}),
    \end{displaymath}
    and then we can take the limit as $n\to\infty$ to see that
		$\nu(\cup I_i)\ge\sum \nu(I_i)$. 

		\medskip

		It remains to establish the reverse inequality.
    Now, let 
		$$I = (a,b] = \cup_{j = 1}^{\infty} (a_{j}, b_{j}].$$ For
    all \( \varepsilon > 0 \), there exists \( \delta > 0 \) such that \(
    F(a + \delta) - F(a) < \varepsilon \) and there exists \( \delta_{j}
    \)'s such that \( F(b_{j} + \delta_{j}) - F(b_{j}) <
    \frac{\varepsilon}{2^{j}} \).
		Here we used the right continuity of $F$.

    Now since \( [a + \delta,b] \) is compact and covered by the open sets
    \( (a_{i}, b_{i} + \delta_{i}) \), there is a finite number of \(
    (a_{i}, b_{i} + \delta_{i})
    \) covers \( [a + \delta,b] \) for \( i \in \{ 1 , \dots , N \} \). This
    means
    \begin{displaymath}
			\nu(I) \leq 2 \varepsilon + \sum_{i = 1}^{\infty} (F(b_{i}) - F(a_{i})),
    \end{displaymath}
		and since $\varepsilon$ was arbitrarily small, we are done.
\end{proof}

\subsection{From countably additive pre-measure to measure}

Let us now focus on properties of measures
which come from a countably additive pre-measure.
This will complete the construction of the measure.

\begin{proposition}
    If \( \mu \) is a measure constructed by the pre-measure \(\nu\), then
    \( \mu \big\vert_{\mathcal{A}} = \nu \big\vert_{\mathcal{A}} \).
\end{proposition}
\begin{proof}
    Take an \( E \in \mathcal{A} \) and cover it with sets \( I_{i} \in
    \mathcal{A} \), i.e. \( E \subseteq \cup_{j =
    1}^{\infty}
    I_{j}\). Now let \( B_{n} = E \cap (I_{n} \setminus \cup_{j = 1}^{n - 1}
    I_{j}) \) which disjointly cover \(E\). We then get
    \begin{displaymath}
        \nu(E) = \sum_{i = 1}^{\infty} \nu(B_{i}) \leq \sum_{i = 1}^{\infty}
        \nu(I_{i}).
    \end{displaymath}
    If we take the infimum over any such sets \( I_{j} \), we have that \(
    \nu(E) \leq \mu(E) \).

    Since \( E \subseteq E \), we already have that \( \mu(E) \leq
    \nu(E) \). Thus, \( \nu \big\vert_{\mathcal{A}} = \mu
    \big\vert_{\mathcal{A}} \).
\end{proof}
%}}}

%{{{
\begin{proposition}
    Let \( \mathcal{A} \) be the set of finite unions of half-open
    intervals. Then for any \(\mu\), all the sets in \( \mathcal{A} \) are
    \(\mu\)-measurable.
\end{proposition}
\begin{proof}
    Let \( B \in \mathcal{A} \) and \( E \subseteq X \). For any \(
    \varepsilon > 0 \), we can find \( A_{i} \in \mathcal{A} \) such that \(
    E \subseteq \cup_{i = 1}^{\infty} A_{i} \) and \( \mu(E) + \varepsilon
    \geq \sum_{i = 1}^{\infty} \nu(A_{i}) \). We then have that
    \begin{align*}
        \mu(E) + \varepsilon
        &\geq \sum_{i = 1}^{\infty} \nu(A_{i})\\
        &= \sum_{i = 1}^{\infty} \left( \nu(A_{i} \cap B) + \nu(A_{i}
        \cap B^c) \right)\\
        &\geq \mu(E \cap B) + \mu(E \cap B^c),
    \end{align*}
    which proves that \( B \) is \(\mu\)-measurable.
\end{proof}
%}}}

%{{{
\begin{proposition}
    Let \( \nu \) be a \( \sigma \)-finite pre-measure and \(\mu\) is the
    induced measure. If \( \rho \) is extension of \(\nu\) (i.e. \(
    \rho \big\vert_{\mathcal{A}} = \nu \)), then \( \mu = \rho \).
\end{proposition}
\begin{proof}
    Let \( E \in \mathcal{F}_{\mu} \), \( E \subseteq \cup_{i = 1}^{\infty}
    A_{i} \), \( A_{i} \in \mathcal{A} \). Then
    \begin{displaymath}
        \rho(E) \leq \sum_{i = 1}^{\infty} \rho(A_{i}) = \sum_{i =
        1}^{\infty}
        \nu(A_{i})
    \end{displaymath}
    so \( \rho(E) \leq \mu(E) \).

    Since \( \rho \) is \(\sigma\)-finite,
    we need only to prove that they concide on finitely-measurably sets. As such, let \( \mu(E) < \infty
    \). Now let \( A_{i} \in \mathcal{A} \) and \( E \subseteq A = \cup_{i
    = 1}^{\infty} A_{i}
    \) where \( \mu(A \Delta E) < \varepsilon \). We first see that
    \begin{displaymath}
        \rho(A) = \lim_{n \to \infty} \rho(\cup_{i = 1}^{n} A_{i})
        = \lim_{n \to \infty} \mu(\cup_{i = 1}^{n} A_{i}) = \mu(A).
    \end{displaymath}
    Since \( A \setminus E \subseteq A \Delta E \), we get that
    \begin{displaymath}
        \mu(E) \leq \mu(A) = \rho(A)
        = \rho(E) + \rho(A \setminus E)
        = \rho(E) + \mu(A \setminus E)
        = \rho(E) + \varepsilon.
    \end{displaymath}
    This proves that \( \mu(E) \leq \rho(E) + \varepsilon \) as we wanted.
\end{proof}


\subsection{Properties of the Lebesgue and Lebesgue-Stieltjes measures}

\begin{definition}
    Any measure that is constructed from $F$ is called a
    \emph{Lebesgue-Stieltjes measure}.  If we use the particular function \(
    F(x) = x \), the measure is called the \emph{Lebesgue measure} and is
    denoted by \( \ell \) instead of \( \mu \).
\end{definition}

The Lebesgue measure has some particularly nice properties:
\begin{enumerate}[i)]
    \item It is shift-invariant (this is because \( F(x) = x \) is
        shift-invariant)
    \item For any \( s \in \mathbb{R} \), \( \ell(sE) = |s| \ell(E) \)
    \item Any measure defined on the Borel set with the two above properties
        must in fact be the Lebesgue measure.
\end{enumerate}

HW Exercise: Let \( \mu \) be a Lebesgue-Stieltjes measure. Show that
\begin{enumerate}[i)]
    \item For all \( E \in \mathcal{F}_{\mu} \), \( \mu(E) = \inf \{ \sum
        _{i = 1}^{\infty} \mu(a_{i}, b_{i}) : E \subseteq
        \cup_{i = 1}^{\infty} (a_{i}, b_{i})
        \}\).
    \item For all \( E \in \mathcal{F}_{\mu} \), \( \mu(E) = \inf \{
            \mu(U) : E \subseteq U, U \text{open} \} \).
    \item For all \( E \in \mathcal{F}_{\mu} \), \( \mu(E) = \sup \{
            \mu(K) : E \subseteq K, K \text{compact} \} \).
\end{enumerate}

However, measurable sets should not scare you. For example, we can
approximate measurable sets by some tamer looking sets, which should help
calm your worries.
\begin{proposition}
    The following are equivalent:
\begin{enumerate}[a)]
    \item \(E\) is \( \mu \)-measurable
    \item \( E = V \setminus N \) where \(N\) is a null set and \( V \) is
        some countable intersection of open sets
    \item \( E = H \cup N \) where \(N\) is a null set and \( H \) is
        some countable union of closed sets
\end{enumerate}
\end{proposition}

In fact, we also have that

\begin{proposition}
    If \( E \) is \(\mu\)-measurable and \( \mu(E) < \infty \), then for any
    \( \varepsilon > 0 \), there are open intervals \( (a_{i}, b_{i}) \)
    such that
    \begin{displaymath}
        \mu(E \Delta \cup_{i = 1}^{n} (a_{i}, b_{i})) < \varepsilon.
    \end{displaymath}
\end{proposition}


HW Exercise:
There exists an open set \( U \subseteq (0,1) \) which is dense in \( (0,1)
\) and \( \ell(U) < \varepsilon \).
Simiarly, \(K = [0,1] \setminus U\), where \(K\) is closed, nowhere dense such that \(
\ell(K) > 1 - \varepsilon \).


\bigskip

How do arbitrary Lebesgue-Stieltjes measures look like? Well, here are some examples:
\begin{enumerate}[1)]
    \item The Lebesgue measure itself
    \item Discrete, weighted, atomic measures like \( \mu = \sum_{i = 1}^{N} a_{i} \delta
        _{x_{i}} \) where \( a_{i} > 0 \)
    \item Singular measures where \( F \) is continuous but almost
			everywhere constant. For an example, the Cantor function, see below.
\end{enumerate}

If \( f \) is the Cantor function and \( x \) is not in the Cantor set, it's
pretty easy to see what \( f(x) \) is. Now for the \( x \) that do lie in
the Cantor set, \( f(x) \) can be found as the result of writing
\( x \) in ternary and then replacing every \( 2 \) with \( 1 \) and
intrepreting this new string as binary.
More explicity, if \( x \) is in the Cantor set it's ternary expansion will
look like
\begin{displaymath}
    \sum_{i = 1}^{\infty} b_{i} 3^{- i} \text{ where } b_{i} \in \{ 0,2 \},
\end{displaymath}
which means \( f(x) \) will be
\begin{displaymath}
    f(x) = \sum_{i = 1}^{\infty} \frac{b_{i}}{2} 2^{- i}.
\end{displaymath}

\subsection{Lebesgue $\sigma$-algebra}

The $\sigma$-algebra $\mathscr{L}$
of Lebesgue measurable
sets is complete, it is a completion of the Borel $\sigma$-algebra.
As such, it contains all Borel sets.
The cardinality of the Lebesgue $\sigma$-algebra is hypercontinuum
$2^{\mathfrak{c}}$, since there are uncountable 
Borel sets of Lebesgue measure zero (like the Cantor set), and 
each subset of them belongs to $\mathscr{L}$.

\subsection{Summary of Part I}

We have discussed measures and construction of measures,
focusing on Lebesgue-Stieltjes measures.
The latter construction works as follows:
\begin{enumerate}[1)]
		\item Take an \(F\) which is right-continuous
		\item Use this \(F\) to construct a pre-measure \(\nu\)
		\item Use this \(\nu\) to construct an outer measure \(\mu\)
		\item Restrict this outer measure to form the measure we want
				(Carath\'eodory's theorem)
\end{enumerate}

There is a number of statements we proved 
about general measures, and 
other facts were related to the particular Lebesgue-Stieltjes
context. 

\part{Lebesgue integral}

\section{February 12, 2019}

\subsection{Monotone Classes}

This part contains a proof of the Monotone Class Lemma --- an 
important technical result that we
use in the proof of Fubini's theorem. 
However, the Monotone Class Lemma is useful across various
results in Measure Theory.

\begin{definition}
	A subset $C$ of $2^X$ is called a \emph{monotone class}
	if $C$ is closed under countable increasing union and countable decreasing intersections.
	That is,
	if $A_1\subset A_2 \subset \ldots $ are in $C$, then 
	$\bigcup_{i} A_i \in C$. Simiarly,
	for $B_1\supset B_2\supset \ldots $ in $C$, we have $\bigcap_{i}B_i\in C$.
\end{definition}

Note: for any subset $\mathscr{E}$ of $2^X$ there is a unique minimal monotone class 
containing $\mathscr{E}$.

\begin{theorem}[The Monotone Class Lemma]
	Let $\mathscr{A}$ be an algebra. Then
	$\sigma(\mathscr{A})$
	coincides with the monotone class generated by  $\mathscr{A}$.
\end{theorem}

\begin{proof}
	Let $C$ be the monotone class generated by $\mathscr{A}$.
	\begin{enumerate}
		\item Because each $\sigma$-algebra is a monotone class, we have
			$C\subset \sigma(\mathscr{A})$. So it remains to show $C$ is a $\sigma$-algebra.
		\item For $E\in C$, define $C(E)=\{F\in C: E\backslash F,F\backslash E, E\cap F\in C\}$.
			Note that $E, \varnothing \in C(E)$, and $F\in C(E) \Leftrightarrow E\in C(F)$.
			Also, $C(E)$ is a monotone class.
		\item  Suppose $E\in \mathscr{A}$, then $\forall F\in \mathscr{A}$ we have $F\in C(E)$
			because $\mathscr{A}$ is an algebra.
			Therefore, 
			$\mathscr{A}\subset C(E)$ 
			for all $E\in \mathscr{A}$.
			Hence $C\subset C(E)$ because $C(E)$ is a monotone class.
		\item If $F\in C$, then for all $E\in \mathscr{A}$, $F\in C(E) \Rightarrow E\in C(F)$.
			This implies that 
			$\mathscr{A} \subset C(F) \ \forall F\in C$. So,  $C\subset C(F) \ \forall F\in C$.
		\item Thus for any $E,F\in C$ we have $E\in C(F) \Rightarrow E\backslash F, E\cap F \in C$ by 
			the definition of $C(F)$. This means that  $C$ is a $\sigma-algebra$.
	\end{enumerate}
	This completes the proof.
\end{proof}

\subsection{Fubini 2}

Here we prove the general Fubini Theorem (called ``Fubini 2'' --- recall that ``Fubini 1'' was for
indicators). Our setup is that we consider the product $\sigma$-algebra 
$\mathscr{F}\times \mathscr{G}$ on $X\times Y$, and the product
measure $\mu\times \nu$ on it. Recall that we don't use completion of
$\mathscr{F}\times \mathscr{G}$.
For a set $E\subset X\times Y$,
the product measure is given by $\mu \times \nu (E) = \iint  \mathbf{1}_{E}\, d\mu\times\nu$.

Recall that for a function $f(x,y)$ on $X\times Y$ we denote by 
$f_x(y)=f(x,y)$ and $f^y(x)=f(x,y)$ the slices
which are functions on $Y$ and $X$, respectively.

\begin{theorem}
	Suppose the measures $\mu,\nu$ on $X,Y$ are $\sigma$-finite.
	\begin{enumerate}[a)]
	\item For $f\geq 0$, $\mathscr{F}\times\mathscr{G}$-measurable,
		the functions $g(x)=\int f_x d\nu, h(x)=\int f^y d\mu$ are measurable, and
		$\iint f d\mu \times \nu = \int_{X} g d\mu = \int_{Y} h d\nu.$
	\item $f\in L^{1}(\mu \times \nu) \Rightarrow g\in L^{1}(\mu)$ 
		and $\iint f d\mu \times \nu = \int_{X} g d\mu$.
	\end{enumerate}
\end{theorem}
\begin{proof}
	The theorem has two parts, first for nonnegative functions
	(when both sides might be $+\infty$), 
	and second for integrable functions.

	For a), use the monotone convergent theorem
			and the fact that every function can be monotonically
			approximated by simple functions, and Fubini 1. 
	For b), express $f=f^{+}-f^{-}$.
\end{proof}
\begin{remark}
	Here is a counterexample for Fubini when the measure is not $\sigma$-finite.
	Let $X=[0,1]$ with $\ell$, the Lebesgue measure, 
	and
	$Y=[0,1]$
	with the counting measure $\nu$:
	$$\nu(A) = \left\{  
	\begin{array}{ll}
		\#A, & \textnormal{if $A$ is finite}; \\
		\infty, & \textnormal{else}.
	\end{array}\right.$$  
	And let $$f(x,y)=\mathbf{1}_{x=y}.$$
	Then 
	\begin{align*}
		\int f(x,y) dx&=0 \ \forall y;\\
		\int f(x,y) \nu(dy)& = 1 \ \forall x.
	\end{align*}
	However, $$\iint f dxd\nu(y)=\infty.$$
	Therefore, all 3 integrals
	(the double integral and both repeated single integrals)
	differ.
\end{remark}

\subsection{Change of Variables}

Next we discuss a number of isolated applications of integration / Fubini.
The first one is the change of variables formula.

\begin{definition}
	For $(X,\mathscr{F},\mu)$, $(Y,\mathscr{G})$, 
	let $\phi : X\rightarrow Y$ be a measurable function. 
	Then the push-forward $\phi_{*}\mu$ is a measure on $(Y,\mathscr{G})$ 
	such that $(\phi_{*}\mu)(E)=\mu(\phi^{-1}(E))$ for $E\in \mathscr{G}$.
\end{definition}

\begin{theorem}
	For a function $f:Y\rightarrow [0,\infty]$ or $f\in L^1(\mu_*\phi)$, we have
	\begin{equation*}
		\int_{X} (f\circ \phi)(x) d\mu(x) = \int_{Y} f(y) d(\phi_{*}\mu).
	\end{equation*}
\end{theorem}

It is illustrative to consider the applications of the change of variables
result for Lebesgue to various situations, such as
\begin{enumerate}[1.]
	\item The case when the function $f(x,y)$ on $[0,1]^2$ (with Lebesgue measure)
		depends only on one variables $y$; then the change of variables formula
		is related to the Fubini's theorem;
	\item How this result is related to the change of variables formula
		from calculus which involves the absolute value of the Jacobian;
	\item How the push-forward of a measure can be used to define the length
		measure on curves.
\end{enumerate}

\subsection{Borel-Cantelli Lemma}

The Borel-Cantelli Lemma is a very powerful tool in probability theory and 
analysis in general.

Let $E_{n}$ be measurable sets, and let $E=\limsup E_n = E_{n} \ i.o.$,
that is, $x\in E$ iff $x$ belongs to infinitely many of the $E_n$'s.

\begin{theorem}[Borel-Cantelli 1]
	If $\sum_{n=1}^{\infty} \mu(E_n) < \infty$, then $\mu(E)=0$.
\end{theorem}
\begin{proof}
	Let 
	$$f=\sum_{n=1}^{\infty}\mathbf{1}_{E_n},\qquad  f_N=\sum_{1}^{N}\mathbf{1}_{E_n}.$$
	Then $f_N\rightarrow f$ monotonically.
	Also, $x\in \limsup{E_n} \Leftrightarrow f(x)=\infty$.
	Hence by the monotone convergence theorem, we have
	$\int f = \sum_{1}^{\infty} \mu(\mathbf{1}_{E_n})<\infty$, which implies that 
	$\mu(x:f(x)=\infty)=0$, and this is the desired claim.
\end{proof}

\begin{theorem}[Borel-Cantelli 2; the converse statement]
	Suppose $\mu(X)=1$, and the sets $E_n$ are independent which means
	$\mu(\cap_{i\in I} E_i)=\prod_{i\in I} \mu(E)$ for any finite subcollection $I$.
	If
	$\sum \mu(E_n)=\infty$, then  $\mu(E_n \ i.o.)=1$.
\end{theorem}
We do not give a proof of this second theorem
in the course.
Let's look at some applications of Borel-Cantelli theorem.
\begin{enumerate}
	\item Suppose you are tossing independent coins, 
		$X_n=0$ with probability $1-1/n^2$,
		and $X_n=1$ with probability $1/n^2$.
		Then $P(\textnormal{infinitely many $1$'s})=0$.
	
	\item Let $f_n$ be a sequence of measurable functions on $[0,1]$, and $|f_n(x)|<\infty$ a.e.
		Then $\exists$ $C_n>0$ s.t. $\frac{f_n(x)}{C_n} \rightarrow 0$ a.e.
		This is an exercise.
\end{enumerate}

\section{February 14, 2019}

This class was a brainstorming session 
on various modes of convergence. 
We started with definitions, and then 
came up with implications and counterexamples.

\subsection{Modes of convergence}

Let $f_n$ be a sequence of measurable functions on $(X,\mathscr{F},\mu)$. Then there are many ways to define the convergence of $f_n$ as $n\rightarrow \infty$.

\begin{enumerate}[1.]
	\item Pointwise/a.e., $f_n(x)\rightarrow f(x)$ for all or $\mu$-almost all $x$.
	\item Uniform, $\forall \epsilon>0$, $|f_n(x)-f(x)|<\epsilon$ for all sufficiently large $n$
		and all $x$ (and the bound on $n$ depends only on $\epsilon$ and not on $x$).
		In other words, $\sup_{x}|f_n(x)-f(x)|\to0$.
	\item $L^1$ convergence, $\int |f_n-f| \rightarrow 0$.
	\item A.e. uniform, $\exists X_0\subset X,\mu(X\setminus X_0)=0$, such that
		$\sup_{x\in X_0} |f_n(x)-f(x)|\rightarrow 0$.
	\item Almost uniform, $\forall \epsilon>0, 
		\exists X_{\epsilon}\subset X, \mu(X_{\epsilon}^{c})<\epsilon$ such that $f_n \rightarrow f$ uniformly on $X_{\epsilon}$, that is, $\sup_{x\in X_\epsilon}|f_n(x)-f(x)|\to0$.
	\item Convergence in measure, $\forall \epsilon>0, \mu(x:|f_n(x)-f(x)|>\epsilon)\rightarrow 0$.
\end{enumerate}

\begin{remark}
		Convergence in measure has is metrizable, for example, one can take
			$\rho(f,g)=\int \frac{|f-g|}{1+|f-g|}$.
\end{remark}

There are some implications / non-implications between the various modes of convergence:
\begin{enumerate}[1.]
	\item uniform $\Rightarrow$ pointwise $\Rightarrow$ a.e.
	\item uniform $\Rightarrow$ a.e. uniform $\Rightarrow$ almost uniform.
	\item uniform $\nLeftrightarrow L^1$.
	\item a.e $\nLeftrightarrow L^1$.
\end{enumerate}
Let us discuss further properties.
\begin{theorem}
	If $f_n \rightarrow f$ in $L^1$, then $f_n \rightarrow f$ in measure.
\end{theorem}
\begin{proof}
	By the Chebyshev (more precisely,
	Markov) inequality, we have
	$$\int |f_n-f| \geq \epsilon \mu(|f_n-f|>\epsilon).$$
	Thus, if the integrals go to zero, the measures
	should go to zero, too.
\end{proof}

\begin{theorem}
	Suppose $f_n \rightarrow f$ in measure. Then there exists a subsequence
	$f_{n_j}\rightarrow f$~a.e.
\end{theorem}
\begin{proof}
	We will show that if 
	the sequence $\{f_n\}$ is Cauchy in measure,
	then there exists a subsequence which converges a.e.
	
	Find $g_j=f_{n_j}$, such that for $$E_j:={|g_j-g_{j+1}|\geq 2^{-j}},\qquad  \mu(E_j)\leq 2^{-j}.$$
	Then let 
	\begin{equation*}
		F_k=\bigcup_{j = k}^{\infty} E_j,\qquad 
		\mu(F_k)\leq 2^{1-k}.
	\end{equation*}
	On $F_{k}^C$, for $j\ge i\ge k$, we have
	\begin{equation*}
		|g_j-g_i|\leq \sum_{m=i}^{j}|g_m-g_{m+1}|\leq 2^{1-i}.
	\end{equation*}
	Let 
	$$F:=\bigcap_{k=1}^{\infty}F_k=\limsup E_j,\qquad  \mu(F)=0.$$
	The sequence $g_j$ is pointwise Cauchy on $F^C$.
	Therefore, we can define $f$ to be the a.e. limit of 
	$g_j$.
	
	It remains to show that if the sequence converges in measure,
	then it is Cauchy in measure. Indeed, we have
	\begin{equation*}
		\{|f_n-f_m|\geq \epsilon \} \subseteq \{|f_n-f|\geq 
		\frac{\epsilon}{2}\}\cup \{|f_m-f|\geq \frac{\epsilon}{2} \}. 
	\end{equation*}
	So if $f_n\rightarrow f $ in measure, the set on the right-hand side 
	has small probability, so the sequence is also Cauchy in measure.
\end{proof}

\subsection{Examples}

Here are some typical counterexamples for testing different modes of convergence:
\begin{enumerate}[(1)]
	\item $f_n=n^{-1}\mathbf{1}_{(0,n)}$.
	\item $f_n=\mathbf{1}_{(n,n+1)}$.
	\item $f_n=n\mathbf{1}_{[0,1/n]}$.
	\item $f_n=\mathbf{1}_{[j/2^k,(j+1)/2^k]}$ where $n=2^k+j$ with $0\leq j<2^k$.
		This sequence of functions behaves as follows:
		\begin{equation*}
			\mathbf{1}_{[0,1]},
			\mathbf{1}_{[0,1/2]},
			\mathbf{1}_{[1/2,1]},
			\mathbf{1}_{[0,1/4]},
			\mathbf{1}_{[1/4,1/2]},
			\mathbf{1}_{[1/2,3/4]},
			\mathbf{1}_{[3/4,1]},
		\end{equation*}
		and so on.
\end{enumerate}

Then in(1), (2), and (3), $f_n \rightarrow 0$ uniformly, pointwise and a.e respectively.
But they do not converge in $L^1$.
In (4), $f_n \rightarrow 0$ in $L^1$, but not pointwise.


\end{document}
